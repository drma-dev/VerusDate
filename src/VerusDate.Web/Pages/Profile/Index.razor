@page "/Profile"
@attribute [Authorize]
@inherits PageCore<Profile.Index>

<Row>
    <Column ColumnSize="ColumnSize.Is6.OnDesktop.Is4.OnWidescreen">
        <Card Margin="Margin.Is3.FromBottom">
            <CardImage Source="@MainPhoto"></CardImage>
            <CardBody>
                <Row>
                    <Column ColumnSize="ColumnSize.Is6" Margin="Margin.Is2.FromBottom">
                        <Button Color="Color.Primary" Outline="true" Block="true" Type="ButtonType.Link" To="ProfileData">
                            <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.UserEdit"></Icon> Dados
                            @if (profile?.Basic == null)
                            {
                                <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.ExclamationCircle" Style="color: #dc3545;"></Icon>
                            }
                        </Button>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6" Margin="Margin.Is2.FromBottom">
                        <Button Color="Color.Primary" Outline="true" Block="true" Type="ButtonType.Link" To="ProfileSearchCriteria">
                            <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.Users"></Icon> Busca
                            @if (profile?.Looking == null)
                            {
                                <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.ExclamationCircle" Style="color: #dc3545;"></Icon>
                            }
                        </Button>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6" Margin="Margin.Is2.FromBottom">
                        <Button Color="Color.Primary" Outline="true" Block="true" Type="ButtonType.Link" To="ProfileGallery">
                            <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.Images"></Icon> Fotos
                            @if (profile?.Photo == null)
                            {
                                <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.ExclamationCircle" Style="color: #dc3545;"></Icon>
                            }
                        </Button>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6" Margin="Margin.Is2.FromBottom">
                        <Button Color="Color.Primary" Outline="true" Block="true" Type="ButtonType.Link" To="Profile/Account">
                            <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.UserCog"></Icon> Conta
                        </Button>
                    </Column>
                </Row>
            </CardBody>
        </Card>
    </Column>
    <Column ColumnSize="ColumnSize.Is6.OnDesktop.Is8.OnWidescreen">
        <Card Margin="Margin.Is3.FromBottom">
            <CardHeader>Conquistas</CardHeader>
            <CardBody>
                <Row>
                    <Column ColumnSize="ColumnSize.Is6.Is3.OnWidescreen.Is2.OnFullHD" Margin="Margin.Is2.FromBottom">
                        <ProfileBadge Type="@badge.Ranking"></ProfileBadge>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6.Is3.OnWidescreen.Is2.OnFullHD" Margin="Margin.Is2.FromBottom">
                        <ProfileBadge Type="@badge.Seniority"></ProfileBadge>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6.Is3.OnWidescreen.Is2.OnFullHD" Margin="Margin.Is2.FromBottom">
                        <ProfileBadge Type="@badge.VerifiedProfile"></ProfileBadge>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6.Is3.OnWidescreen.Is2.OnFullHD" Margin="Margin.Is2.FromBottom">
                        <ProfileBadge Type="@badge.Popular"></ProfileBadge>
                    </Column>
                </Row>
            </CardBody>
        </Card>
        <Card Margin="Margin.Is3.FromBottom">
            <CardHeader>Interações</CardHeader>
            <CardBody>
                <Row>
                    <Column ColumnSize="ColumnSize.Is6.OnWidescreen.Is4.OnFullHD" Margin="Margin.Is2.FromBottom">
                        <Tooltip Text="ver caixa de mensagens" Multiline="true" Fade="true" Style="display: block;">
                            <Button Color="Color.Primary" Type="ButtonType.Link" Block="true" To="/Interaction/Index" Disabled="true">
                                <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.Comments"></Icon> Mensagens
                                <Badge Color="Color.Light">@GlobalInteractionsVM?.TotalMessages</Badge>
                                <Badge Color="Color.Danger">@GlobalInteractionsVM?.UnreadMessages</Badge>
                            </Button>
                        </Tooltip>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6.OnWidescreen.Is4.OnFullHD" Margin="Margin.Is2.FromBottom">
                        <Tooltip Text="ver likes recebidos" Multiline="true" Fade="true" Style="display: block;">
                            <Button Color="Color.Primary" Type="ButtonType.Link" Block="true" To="/Interaction/Index" Disabled="true">
                                <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.ThumbsUp"></Icon> Likes
                                <Badge Color="Color.Light">@GlobalInteractionsVM?.TotalLikes</Badge>
                            </Button>
                        </Tooltip>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is6.OnWidescreen.Is4.OnFullHD" Margin="Margin.Is2.FromBottom">
                        <Tooltip Text="ver piscadinhas recebidas" Multiline="true" Fade="true" Style="display: block;">
                            <Button Color="Color.Primary" Type="ButtonType.Link" Block="true" To="/Interaction/Index" Disabled="true">
                                <Icon Name="Blazorise.Icons.FontAwesome.FontAwesomeIcons.KissWinkHeart"></Icon> Piscadinhas
                                <Badge Color="Color.Light">@GlobalInteractionsVM?.TotalBlinks</Badge>
                            </Button>
                        </Tooltip>
                    </Column>
                </Row>
            </CardBody>
        </Card>
    </Column>
</Row>

@code {

    private string MainPhoto = ImageHelper.GetNoUserPhoto;

    private ProfileModel profile;
    private ProfileGamificationModel gamification;
    private ProfileBadgeModel badge = new();
    private GlobalInteractions GlobalInteractionsVM = new();

    protected override async Task LoadData()
    {
        profile = await Http.Profile_Get(SessionStorage);

        if (profile != null)
        {
            MainPhoto = profile.GetMainPhoto();
        }

        gamification = profile?.Gamification;
        if (profile?.Badge != null) badge = profile.Badge;
        //GlobalInteractionsVM = await Http.GlobalInteractions_Get();
    }
}